"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var __chunk_1=require("./chunk-526f491f.js"),__chunk_2=require("./chunk-914cbf0a.js"),gotBase=_interopDefault(require("got")),jsdom=require("jsdom");require("path"),require("fs"),require("make-dir"),require("filenamify"),require("chalk"),require("readline"),require("util"),require("cli-truncate"),require("crypto"),require("mime-types");class Chapter extends __chunk_1.Chapter{async updateFiles(){const{props:e}=this,t=Object.assign({},e,{prefix:this.prefix,got:gotBase});return __chunk_2.toFiles(t,async(t,n)=>{let r=[],i=n.getImages("#contentMain-inner img"),s=t.getElementById("contentMain-inner");{const t=await e.buffer;let n=t?"function"==typeof t?await t():t.toString():"";const i=["widget-episodeTitle","widget-episode"];for(const e of i)for(const t of s.getElementsByClassName(e))n+=t.textContent+"\n\n-----\n\n";r.push({fname:this.getName(`${e.title}.txt`),integity:void 0,buffer:n})}return[r,i]})}}class Volume extends __chunk_1.Volume{}class Series extends __chunk_1.Series{static test(e){return/^((http|https):\/\/|)kakuyomu.jp\/works\/[^\/]+\/?$/.test(e)}get Chapter(){return Chapter}get Volume(){return Volume}async fetch(){const e=this.sourceURL;let{window:{document:t}}=new jsdom.JSDOM((await gotBase(e)).body,{url:e}),n=[],r=[],i="";{let e="";e+=t.getElementById("workTitle").textContent+"\n",e+=`Author: ${t.getElementById("workAuthor-activityName").textContent}\n`,e+=`\n${t.getElementById("introduction").textContent}\n`,i+=e,e=void 0,r.push({title:"Description",integrity:Date.now(),buffer:()=>i})}let s=-1;for(const e of t.getElementsByClassName("widget-toc-items"))for(const t of e.children)if(t.classList.contains("widget-toc-chapter")){let e=t.textContent.trim();n.push({title:e}),i+=`\n## ${e}\n`,++s}else{let e=t.getElementsByClassName("widget-toc-episode-episodeTitle")[0],n=e.href,o=e.getElementsByClassName("widget-toc-episode-titleLabel")[0].textContent,u=e.getElementsByClassName("widget-toc-episode-datePublished")[0].getAttribute("datetime");i+=`${String(r.length).padStart(3,"0")} ${o}\n`,r.push({volume:s,sourceURL:n,title:o,integrity:u})}return r[0].integrity=__chunk_2.hash(i),this.patch({volumes:n,chapters:r})}}exports.Chapter=Chapter,exports.Volume=Volume,exports.Series=Series,exports.default=Series;
//# sourceMappingURL=app.min4.js.map
